#!/bin/bash

#HELP   Latest DPCS error logs (tail).

LOG_SIZE=${LOG_SIZE:-30}

OUTPUT=$(mktemp -u)
MINUTES_AGO=120

{ zgrep -h "ERROR" \
	$(find {/tmp/kiosklogpusher/backup,/usr/local/dpcs}/DeliveryPointClientService.log* -mmin -${MINUTES_AGO}) \
	| sort >> ${OUTPUT}; } 2> /dev/null

(( $(wc -l < ${OUTPUT}) )) \
	&& tail -n ${LOG_SIZE} ${OUTPUT} \
	|| echo "- Nothing found."
